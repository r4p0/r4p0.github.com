<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport"content="initial-scale=1.0"><title>根据身份证信息推测生日</title><style>*{padding:0;margin:0;box-sizing:border-box}body{display:-webkit-flex;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-align-content:stretch;-ms-flex-line-pack:stretch;align-content:stretch;background:#ececec}body,html{padding:0;margin:0;font-family:Helvetica,Verdana,sans-serif;font-weight:400;font-display:optional;color:#444;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body,body:after,html{width:100%;height:100%}.main{z-index:0;padding-top:64px;-webkit-flex:1;-ms-flex:1;flex:1;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch}.header{will-change:transform;position:fixed;width:100%;height:56px;color:#FFF;background:#3F51B5;font-size:20px;box-shadow:0 4px 5px 0 rgba(0,0,0,.14),0 2px 9px 1px rgba(0,0,0,.12),0 4px 2px-2px rgba(0,0,0,.2);padding:16px 16px 0;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:stretch;-ms-flex-align:stretch;align-items:stretch;-ms-flex-line-pack:center;-webkit-align-content:center;align-content:center;transition:-webkit-transform 233ms cubic-bezier(0,0,.21,1).1s;transition:transform 233ms cubic-bezier(0,0,.21,1).1s;transition:transform 233ms cubic-bezier(0,0,.21,1).1s,-webkit-transform 233ms cubic-bezier(0,0,.21,1).1s;z-index:2}.header__title{font-weight:400;font-size:20px;text-align:center;margin:0;-webkit-flex:1;-ms-flex:1;flex:1}.card{padding:16px;position:relative;background:#fff;border-radius:2px;margin:8px;box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px-2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12)}.card span{display:inline-block;width:40%;padding-right:10px;text-align:right}.idinput{display:inline-block;width:60%}.calc{margin-top:10px;width:100%}</style></head><body><header class="header"><h1 class="header__title">根据身份证信息推测生日</h1></header><main class="main js-global-main"aria-role="main"><div class="card"><span>身份证前10位:</span><input class="idinput"id="first"type="text"maxlength="10"><br><span>身份证后4位:</span><input class="idinput"id="last"type="text"maxlength="4"><br><button class='calc',onclick="calcBirthday()">计算</button><div id='result'></div></div></main><script>var reg=/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[12])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i;var w=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];var a5=[5,4,3,2,1,0,10,9,8,7,6];var result=document.getElementById('result');var first=document.getElementById('first');var last=document.getElementById('last');function calcBirthday(){result.innerHTML=guessBirthday(`${first.value}****${last.value}`).join('<br/>')}function guessBirthday(id){if(typeof(id)!=='string'){return}var city=id.substr(0,6);var last4=id.substr(14,4);var year=parseInt(id.substr(6,4));var begin=new Date(year,0,1);var days=(new Date(year+1,0,1)-begin)/1000/24/3600;var result=[];for(let i=0;i<days;i++){var testID=`${city}${FormatDate.call(begin,'yyyyMMdd')}${last4}`if(idCardNoUtil.checkParityBit(testID)){result.push(testID)}begin.setDate(begin.getDate()+1)}return result}var FormatDate=function(fmt){var o={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S":this.getMilliseconds()};if(/(y+)/.test(fmt))fmt=fmt.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length));for(var k in o)if(new RegExp("("+k+")").test(fmt))fmt=fmt.replace(RegExp.$1,(RegExp.$1.length==1)?(o[k]):(("00"+o[k]).substr((""+o[k]).length)));return fmt}var idCardNoUtil={provinceAndCitys:{11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"},powers:["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"],parityBit:["1","0","X","9","8","7","6","5","4","3","2"],genders:{male:"男",female:"女"},checkAddressCode:function(addressCode){var check=/^[1-9]\d{5}$/.test(addressCode);if(!check)return false;if(idCardNoUtil.provinceAndCitys[parseInt(addressCode.substring(0,2))]){return true}else{return false}},checkBirthDayCode:function(birDayCode){var check=/^[1-9]\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))$/.test(birDayCode);if(!check)return false;var yyyy=parseInt(birDayCode.substring(0,4),10);var mm=parseInt(birDayCode.substring(4,6),10);var dd=parseInt(birDayCode.substring(6),10);var xdata=new Date(yyyy,mm-1,dd);if(xdata>new Date()){return false}else if((xdata.getFullYear()==yyyy)&&(xdata.getMonth()==mm-1)&&(xdata.getDate()==dd)){return true}else{return false}},getParityBit:function(idCardNo){var id17=idCardNo.substring(0,17);var power=0;for(var i=0;i<17;i++){power+=parseInt(id17.charAt(i),10)*parseInt(idCardNoUtil.powers[i])}var mod=power%11;return idCardNoUtil.parityBit[mod]},checkParityBit:function(idCardNo){var parityBit=idCardNo.charAt(17).toUpperCase();if(idCardNoUtil.getParityBit(idCardNo)==parityBit){return true}else{return false}},checkIdCardNo:function(idCardNo){var check=/^\d{15}|(\d{17}(\d|x|X))$/.test(idCardNo);if(!check)return false;if(idCardNo.length==15){return idCardNoUtil.check15IdCardNo(idCardNo)}else if(idCardNo.length==18){return idCardNoUtil.check18IdCardNo(idCardNo)}else{return false}},check15IdCardNo:function(idCardNo){var check=/^[1-9]\d{7}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}$/.test(idCardNo);if(!check)return false;var addressCode=idCardNo.substring(0,6);check=idCardNoUtil.checkAddressCode(addressCode);if(!check)return false;var birDayCode='19'+idCardNo.substring(6,12);return idCardNoUtil.checkBirthDayCode(birDayCode)},check18IdCardNo:function(idCardNo){var check=/^[1-9]\d{5}[1-9]\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}(\d|x|X)$/.test(idCardNo);if(!check)return false;var addressCode=idCardNo.substring(0,6);check=idCardNoUtil.checkAddressCode(addressCode);if(!check)return false;var birDayCode=idCardNo.substring(6,14);check=idCardNoUtil.checkBirthDayCode(birDayCode);if(!check)return false;return idCardNoUtil.checkParityBit(idCardNo)},formateDateCN:function(day){var yyyy=day.substring(0,4);var mm=day.substring(4,6);var dd=day.substring(6);return yyyy+'-'+mm+'-'+dd},getIdCardInfo:function(idCardNo){var idCardInfo={gender:"",birthday:""};if(idCardNo.length==15){var aday='19'+idCardNo.substring(6,12);idCardInfo.birthday=idCardNoUtil.formateDateCN(aday);if(parseInt(idCardNo.charAt(14))%2==0){idCardInfo.gender=idCardNoUtil.genders.female}else{idCardInfo.gender=idCardNoUtil.genders.male}}else if(idCardNo.length==18){var aday=idCardNo.substring(6,14);idCardInfo.birthday=idCardNoUtil.formateDateCN(aday);if(parseInt(idCardNo.charAt(16))%2==0){idCardInfo.gender=idCardNoUtil.genders.female}else{idCardInfo.gender=idCardNoUtil.genders.male}}return idCardInfo},getId15:function(idCardNo){if(idCardNo.length==15){return idCardNo}else if(idCardNo.length==18){return idCardNo.substring(0,6)+idCardNo.substring(8,17)}else{return null}},getId18:function(idCardNo){if(idCardNo.length==15){var id17=idCardNo.substring(0,6)+'19'+idCardNo.substring(6);var parityBit=idCardNoUtil.getParityBit(id17);return id17+parityBit}else if(idCardNo.length==18){return idCardNo}else{return null}}};</script></body></html>
